{% extends "layout.html" %}

{% block page_title %}
  GOV.UK prototyping kit
{% endblock %}

{% block propositionHeader %}
  {% include "includes/propositional_navigation.html" %}
{% endblock %}

{% block content %}

<script src="/public/javascripts/vendor/jquery.min.js"></script>

<main id="content" role="main">
  
  {% include "includes/main_nav.html" %}
  
  <div class="main-content">
    <h1 class="heading-large">Appointments Summary -  Mr J Smith</h1>

    <div class="grid-row">
      {% set currentClaimantPage = 'appointment' %}
      {% include "includes/summary_nav.html" %}

      <div class="column-full">
        <table>
          <thead>
            <tr>
              <th scope="col">Type</th>
              <th scope="col">Date</th>
              <th scope="col">Time</th>
              <th scope="col">Status</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in data.appointments %}
              <tr>
                <td>{{appointment.apptType}}</td>
                <td>{{dateDisplay(appointment.apptDateValues)}}</td>
                <td>{{appointment.apptTimeHrs}}:{{appointment.apptTimeMins}}</td>
                <td>{{appointment.apptStatus}}</td>
                <td>{{appointmentUpdateLink(appointment)}}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <div class="grid-row">
      <div class="column-full">
        <br/>
        <a href="/latest/appointment-edit" class="button">Create appointment</a>
      </div>
    </div> 
  </div>
</main>
{% endblock %}

{% macro appointmentUpdateLink(appointment) %}
  {% set queryString = '?id=' + appointment.id  %}
  <a href="/latest/appointment-edit{{queryString}}">View/Update</a>
{% endmacro %}

{% macro dateDisplay(dateArray) %}
  {% set monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}

  {{dateArray[0] | int}} {{monthNames[dateArray[1]-1]}} {{dateArray[2]}}
{% endmacro %}

